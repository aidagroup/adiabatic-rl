Bootstrap: docker
#From: ubuntu:22.04
#From: nvidia/cuda:12.4.0-runtime-ubuntu22.04
From: nvidia/cuda:12.6.1-cudnn-devel-ubuntu22.04

%post
    apt-get -y update

    apt-get -y install curl wget lsb-release gnupg
    #apt-get -y install cudnn9-cuda-12 

    #wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-keyring_1.1-1_all.deb
    #dpkg -i cuda-keyring_1.1-1_all.deb
    #apt-get update
    #echo 43 | apt-get -y install cuda


    # gazbeo
    curl https://packages.osrfoundation.org/gazebo.gpg --output /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg
    echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] http://packages.osrfoundation.org/gazebo/ubuntu-stable $(lsb_release -cs) main" | tee /etc/apt/sources.list.d/gazebo-stable.list > /dev/null
    apt-get -y update
    apt-get -y install gz-harmonic
    # utilities
    apt-get -y install git nano
    apt-get -y install python3 
    apt-get -y install python3-pip
    python3 -m pip install numpy scipy scikit-learn tensorflow keras
    python3 -m pip install tensorflow_datasets pandas matplotlib argparse tensorflow_addons imageio
    # gz-transport
    sh -c 'echo "deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main" > /etc/apt/sources.list.d/gazebo-stable.list'
    wget https://packages.osrfoundation.org/gazebo.key -O - | apt-key add -
    apt-get -y update
    apt-get -y install libgz-transport13-dev


%environment
    #export LC_ALL=C
    #export PATH=/usr/games:$PATH

%runscript
    #fortune | cowsay | lolcat
    echo "HELLO"
